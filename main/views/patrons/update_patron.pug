extends ../layout

block content
  h1= (patron.first_name || patron.last_name) ? 'Patron: ' + (patron.first_name || '') + ' ' + (patron.last_name || '') : 'Edit Patron'
  form(method='post', action='/patrons/' + patron.id, novalidate)
    input(type='hidden', name='_method', value='PUT')
    if errors && errors.length
      h2.error Oooops!
      ul.error
        each msg in errors
          li= msg
    p
      label(for='first_name') First Name
      input#first_name(name='first_name', type='text', value=patron.first_name || '')
    p
      label(for='last_name') Last Name
      input#last_name(name='last_name', type='text', value=patron.last_name || '')
    p
      label(for='address') Address
      input#address(name='address', type='text', value=patron.address || '')
    p
      label(for='email') Email
      input#email(name='email', type='email', value=patron.email || '')
    p
      label(for='library_id') Library ID
      input#library_id(name='library_id', type='text', value=patron.library_id || '')
    p
      label(for='zip_code') Zip Code
      input#zip_code(name='zip_code', type='text', value=patron.zip_code || '')
    p
      input(type='submit', value='Update')

  if loans && loans.length > 0
    h2 Loan History
    table
      thead
        tr
          th Book
          th Loaned on
          th Return by
          th Returned on
          th Action
      tbody
        each loan in loans
          tr
            td
              a(href='/books/' + loan.Book.id)= loan.Book.title
            td= loan.loaned_on
            td= loan.return_by
            td= loan.returned_on || 'â€”'
            td
              if !loan.returned_on
                a.button(href='/loans/' + loan.id + '/return') Return Book
  else if loans && loans.length === 0
    h2 Loan History
    p.no-results No loans yet.
