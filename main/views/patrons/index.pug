extends ../layout

block content
  h1 Patrons
  div.create-search-container
    a.button(href='/patrons/new') Create New Patron
    form(method='get')
      input#search(type='search', name='search', placeholder='Search...', value=search)
      button.search-btn(type='submit') Search
  table
    thead
      tr
        th Name
        th Address
        th Email
        th Library ID
        th Zip
    tbody
      each patron in patrons
        tr
          td
            a(href='/patrons/' + patron.id)= patron.first_name + ' ' + patron.last_name
          td= patron.address
          td= patron.email
          td= patron.library_id
          td= patron.zip_code
  if totalPages > 1
    nav.pagination
      ul
        if page > 1
          li
            a(href='?page=' + (page - 1) + (search ? '&search=' + search : '')) Previous
        - let p = 1
        while p <= totalPages
          li(class=(p === page ? 'active' : ''))
            a(href='?page=' + p + (search ? '&search=' + search : ''))= p
          - p++
        if page < totalPages
          li
            a(href='?page=' + (page + 1) + (search ? '&search=' + search : '')) Next
